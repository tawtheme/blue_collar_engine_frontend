<div class="page-title-box items-center">
    <div class="container-xxl">
        <div class="d-flex items-center">
            <h3 class="page-title">Customers</h3>
            <div class="page-title-right d-flex align-items-center gap-3 ms-auto">
                <button class="primary-filled-button  w-100" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#AddCustomerSidebar" aria-controls="AddCustomerSidebar"><span
                        class="icon-add"></span> Add New
                    Customer</button>
                <button class="primary-filled-button  w-100" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#AddAddressSidebar" aria-controls="AddAddressSidebar"><span class="icon-add"></span>
                    Add
                    Address</button>
            </div>
        </div>
    </div>
</div>
<div class="container-xxl">
    <div class="py-4">
        <div class="widget-container">
            <article class="widget-card ">
                <div class="widget-card-circle lightGrayBox">
                    <span class="icon-team"></span>
                </div>
                <div class="widget-card-info">
                    <h6>234</h6>
                    <p>Total Customers</p>
                </div>
            </article>
            <article class="widget-card ">
                <div class="widget-card-circle lightYellowBox">
                    <span class="icon-invoice"></span>
                </div>
                <div class="widget-card-info">
                    <h6>$18,000</h6>
                    <p>Due from 15 customers</p>
                </div>
            </article>
            <article class="widget-card ">
                <div class="widget-card-circle lightDangerBox">
                    <span class="icon-estimate"></span>
                </div>
                <div class="widget-card-info">
                    <h6>35
                        <!-- <span>Estimates have not been</span> -->
                    </h6>
                    <p>approved yet $25,749.98</p>
                </div>
            </article>
            <article class="widget-card ">
                <div class="widget-card-circle lightSuccessBox">
                    <span class="icon-user"></span>
                </div>
                <div class="widget-card-info">
                    <h6>75%
                        <!-- <span>Active customers have been</span> -->
                    </h6>
                    <p>active within the last 6 months</p>
                </div>
            </article>
        </div>
        <div class="table-top-filter-row">
            <div class="table-top-filter-left">
                <div class="top-search-group flexGrow2 startIconInputField">
                    <input type="text" id="search" name="search" placeholder="Search with Name, Phone number here..."
                        class="form-control">
                    <span class="icon-search iconPosition"></span>
                </div>
                <div class="top-search-group flexGrow1">
                    <input type="date" id="date" name="date" placeholder="Select date..." class="form-control">
                </div>
            </div>
            <div class="table-top-filter-right">
                <button class="light-outlined-button"><span class="icon-import"></span> Export</button>
            </div>
        </div>
        <div class="row mt-3 mb-3">
            <div class="mt-20 customers-tables">
                <table class="row-border">
                    <thead>
                        <tr>
                            <th>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </th>
                            <th>Create date</th>
                            <th>Customer Name</th>
                            <th>Contact number</th>
                            <th>Address</th>
                            <th>Balance Due</th>
                            <th>Last Booking</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gridCheck">
                                </div>
                            </td>
                            <td>Feb 26, 2024</td>
                            <td>Ava Franklin</td>
                            <td>(234) 345-6984</td>
                            <td>Palmetto Bay, Miami</td>
                            <td>$345.89</td>
                            <td>Feb 26, 2024</td>
                            <td>
                                <div class="d-flex align-items-center justify-content-center">
                                    <button class=" light-outlined-button">View
                                        Details</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<div class="offcanvas offcanvas-end sidebar-popup" tabindex="-1" id="AddCustomerSidebar"
    aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header sidebar-popup-header">
        <h6 class="offcanvas-title" id="offcanvasRightLabel">Add Customer</h6>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
        </button>
    </div>
    <form class="sidebar-popup-inner" [formGroup]="customerForm" (ngSubmit)="onSubmit()">
        <div class="offcanvas-body" style="height: 700px;">
            <div class="form-group mb-3">
                <label for="fname" class="form-label">Customer Name</label>
                <input type="text" formControlName="fname" class="form-control" placeholder="First name"
                    [ngClass]="{ 'is-invalid': submitted && f.fname.errors }" maxlength="50" />
                <div *ngIf="submitted && f.fname.errors" class="invalid-feedback">
                    <div *ngIf="f.fname.errors.required">First name is required</div>
                </div>
                <input type="text" formControlName="lname" class="form-control" placeholder="Last name"
                    [ngClass]="{ 'is-invalid': submitted && f.lname.errors }" maxlength="50" />
                <div *ngIf="submitted && f.lname.errors" class="invalid-feedback">
                    <div *ngIf="f.lname.errors.required">Last name is required</div>
                </div>
            </div>
            <div class="form-group mb-3">
                <label for="companyname" class="form-label">Company Name (If applicable)</label>
                <input type="text" formControlName="companyName" class="form-control" placeholder="Company name"
                    [ngClass]="{ 'is-invalid': submitted && f.companyName.errors }" maxlength="200" />
            </div>
            <div class="form-group mb-3" formArrayName="contacts">
                <label for="mobile" class="form-label">Phone Number</label>
                <!-- <div class="row mb-15 gx-3">
                    <div class="col-md-12">
                        <input type="text" formControlName="contact" id="phone" name="phone" placeholder="Enter Number" class="form-control">
                    </div>                   
                </div> -->

                <div class="row mb-15 gx-3" *ngFor="let contact of contacts().controls; let i=index"
                    [formGroupName]="i">
                    <div class="col-md-12">
                        <input type="text" formControlName="contact" id="phone" name="phone" placeholder="Enter Number"
                            class="form-control" [ngClass]="{ 'is-invalid': submitted && contact.errors }"
                            pattern="[0-9]{5}[-][0-9]{7}[-][0-9]{1}" />
                        <div *ngIf="submitted && contact.errors" class="invalid-feedback">
                            <div *ngIf="contact.errors.required">This field is required</div>
                        </div>
                        <button (click)="removeContact(i)" class="btn btn-danger">Remove</button>
                    </div>
                </div>
                <button class="light-primary-outlined-button xs-btn" (click)="addMoreContact()" type="button"><span
                        class="icon-add"></span>Add
                    Phone</button>
            </div>
            <div class="form-group mb-3">
                <label for="email" class="form-label">Email Address</label>
                <input type="text" formControlName="emailAddress" class="form-control" placeholder="Email address"
                    [ngClass]="{ 'is-invalid': submitted && f.emailAddress.errors }" maxlength="200"
                    pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" />
                <div *ngIf="submitted && f.emailAddress.errors" class="invalid-feedback">
                    <div *ngIf="f.emailAddress.errors.required">Email address is required</div>
                    <div *ngIf="f.emailAddress.errors.pattern">Enter valid email address</div>
                </div>
            </div>

            <div class="form-group mb-3">
                <label for="fname" class="form-label">Service Address</label>
                <input type="text" formControlName="address" class="form-control" placeholder="Service Address"
                    [ngClass]="{ 'is-invalid': submitted && f.address.errors }" maxlength="500" />
                <div class="row g-3">
                    <!-- <div class="col-md-6 ">
                        <select id="state" name="Country" class="form-select">
                            <option value="" disabled selected>Country</option>
                            <option value="USA">USA</option>
                        </select>
                    </div> -->
                    <div class="col-md-6 ">
                        <select id="state" formControlName="state" name="state" class="form-select"
                            [ngClass]="{ 'is-invalid': submitted && f.state.errors }">
                            <option value="">Select</option>
                            <option value="California">California</option>
                            <option value="Texas">Texas</option>
                            <option value="Florida">Florida</option>
                            <option value="New York">New York</option>
                            <option value="Pennsylvania">Pennsylvania</option>
                            <option value="Illinois">Illinois</option>
                            <option value="Ohio">Ohio</option>
                            <option value="Georgia">Georgia</option>
                            <option value="North Carolina">North Carolina</option>
                            <option value="Michigan">Michigan</option>
                        </select>
                    </div>
                    <div class="col-md-6 ">
                        <input type="text" formControlName="city" class="form-control" placeholder="City"
                            [ngClass]="{ 'is-invalid': submitted && f.city.errors }" maxlength="50" />
                    </div>
                    <div class="col-md-6">
                        <input type="text" formControlName="zipCode" class="form-control" placeholder="ZipCode"
                            [ngClass]="{ 'is-invalid': submitted && f.zipCode.errors }" maxlength="10" />
                    </div>

                </div>
            </div>
            <div class="form-group mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked
                        formControlName="IsDefaultBillingAddress">
                    <label class="form-check-label form-label" for="flexSwitchCheckChecked"> User this for billing
                        address as
                        default</label>
                </div>
            </div>
            <div class="form-group mb-3">
                <label for="tags" class="form-label">Tags</label>
                <tag-input formControlName="tags" class="form-control" placeholder="tags" [modelAsStrings]="true"
                    [theme]="'dark'" [ngClass]="{ 'is-invalid': submitted && f.tags.errors }"
                    maxlength="500"></tag-input>
            </div>
            <div class="form-group mb-3">
                <label for="status" class="form-label">Status</label>
                <select id="status" name="status" class="form-select" formControlName="status">
                    <option value="A" selected>Active Customer</option>
                    <option value="I">In-active Customer</option>
                </select>
            </div>
        </div>
        <div class="sidebar-popup-bottom offcanvas-footer">
            <button class="light-outlined-button outlined w-100" data-bs-dismiss="offcanvas"
                type="button">Cancel</button>
            <button [disabled]="loading" class="btn btn-primary">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
                Save
            </button>
        </div>
    </form>
</div>


<div class="offcanvas offcanvas-end sidebar-popup" tabindex="-1" id="AddAddressSidebar"
    aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header sidebar-popup-header">
        <h6 class="offcanvas-title" id="offcanvasRightLabel">Add Address</h6>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">

        </button>
    </div>
    <div class="offcanvas-body">
        <form class="sidebar-popup-inner">

            <div class="form-group mb-3">
                <label for="addressLabel" class="form-label">Address Label</label>
                <input type="text" id="addressLabel" name="addressLabel" placeholder="eg. office address, home address"
                    class="form-control mb-15">
            </div>

            <div class="form-group mb-3">
                <div class="address-map">
                    <img src="../../../assets/images/map.png" class="img-fluid" />
                </div>
            </div>

            <div class="form-group mb-3">
                <label for="address" class="form-label">Address</label>
                <input type="text" id="address" name="address" placeholder="Address" class="form-control mb-15">
            </div>

            <div class="row g-3">
                <div class="col-md-6 ">
                    <div class="form-group">
                        <label for="Country" class="form-label">Country</label>
                        <select id="state" name="Country" class="form-select">
                            <option value="" disabled selected>Country</option>
                            <option value="USA">USA</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6 ">
                    <div class="form-group">
                        <label for="State" class="form-label">State</label>
                        <select id="state" name="state" class="form-select">
                            <option value="" disabled selected>State</option>
                            <option value="California">California</option>
                            <option value="Texas">Texas</option>
                            <option value="Florida">Florida</option>
                            <option value="New York">New York</option>
                            <option value="Pennsylvania">Pennsylvania</option>
                            <option value="Illinois">Illinois</option>
                            <option value="Ohio">Ohio</option>
                            <option value="Georgia">Georgia</option>
                            <option value="North Carolina">North Carolina</option>
                            <option value="Michigan">Michigan</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6 ">
                    <div class="form-group">
                        <label for="city" class="form-label">City</label>
                        <input type="text" id="city" name="city" placeholder="City" class="form-control">
                    </div>
                </div>
                <div class="col-md-6 ">
                    <div class="form-group">
                        <label for="zipcode" class="form-label">Zip Code</label>
                        <input type="text" id="zipcode" name="zipcode" placeholder="Zip Code" class="form-control">
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group mb-3">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked2"
                                checked>
                            <label class="form-check-label form-label" for="flexSwitchCheckChecked2"> User this for
                                billing address
                                as
                                default</label>
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>
    <div class="sidebar-popup-bottom offcanvas-footer">
        <button class="light-outlined-button outlined w-100" data-bs-dismiss="offcanvas" type="button">Cancel</button>
        <button class="primary-filled-button filled w-100" data-bs-dismiss="offcanvas" type="submit">Save</button>
    </div>
</div>