<div class="page-title-box items-center">
    <div class="container-xxl">
        <div class="d-flex items-center">
            <h3 class="page-title">Scheduler</h3>
            <div class="page-title-right d-flex align-items-center gap-3 ms-auto">
                <button class="primary-filled-button  w-100" type="button" (click)="redirectToBooking()">
                    <span class="icon-add"></span>
                    Add New Booking</button>
            </div>
        </div>
    </div>
</div>

<div class="container-xxl">
    <div class="row py-4">
        <div class="col-3">
            <div class="border rounded h-100 overflow-hidden">
                <div class="bg-light p-3 d-flex justify-content-between align-items-center">
                    <span class="fc-icon fc-icon-chevron-left font18" role="img"></span>
                    <h4 class="font16">Feb 26, 2024</h4>
                    <span class="fc-icon fc-icon-chevron-right font18" role="img"></span>
                </div>
                <div class="scheduler-left-lists">
                    <div class="p-3 border-bottom">
                        <div class="d-flex gap-3 mb-2">
                            <span class="grey-badge"><span class="icon-time"></span> 10:00AM-11:00AM</span>
                            <button class="danger-badge" type="button" data-bs-toggle="offcanvas"
                                data-bs-target="#BookingDetailsSidebar"
                                aria-controls="BookingDetailsSidebar">Unassigned</button>
                        </div>
                        <h4 class="font18">John Deo</h4>
                        <p class="font14 mb-2 font-muted ">123 Main Street, Anytown, USA</p>
                        <div class="font14 d-flex align-items-center gap-2 mb-2 font-muted"> <span
                                class="icon-call"></span>(555)
                            555 555 </div>
                        <div class="font14 d-flex align-items-center gap-2 font-muted"><span
                                class="icon-email"></span>info&#64;comfortzonheating.com </div>
                    </div>

                    <div class="p-3 border-bottom">
                        <div class="d-flex gap-3 mb-2">
                            <span class="grey-badge"><span class="icon-time"></span> 10:00AM-11:00AM</span>
                            <button class="danger-badge" type="button" data-bs-toggle="offcanvas"
                                data-bs-target="#BookingDetailsSidebar"
                                aria-controls="BookingDetailsSidebar">Unassigned</button>
                        </div>
                        <h4 class="font18">John Deo</h4>
                        <p class="font14 mb-2 font-muted ">123 Main Street, Anytown, USA</p>
                        <div class="font14 d-flex align-items-center gap-2 mb-2 font-muted"> <span
                                class="icon-call"></span>(555)
                            555 555 </div>
                        <div class="font14 d-flex align-items-center gap-2 font-muted"><span
                                class="icon-email"></span>info&#64;comfortzonheating.com </div>
                    </div>
                    <div class="p-3 border-bottom">
                        <div class="d-flex gap-3 mb-2">
                            <span class="grey-badge"><span class="icon-time"></span> 10:00AM-11:00AM</span>
                            <button class="danger-badge" type="button" data-bs-toggle="offcanvas"
                                data-bs-target="#BookingDetailsSidebar"
                                aria-controls="BookingDetailsSidebar">Unassigned</button>
                        </div>
                        <h4 class="font18">John Deo</h4>
                        <p class="font14 mb-2 font-muted ">123 Main Street, Anytown, USA</p>
                        <div class="font14 d-flex align-items-center gap-2 mb-2 font-muted"> <span
                                class="icon-call"></span>(555)
                            555 555 </div>
                        <div class="font14 d-flex align-items-center gap-2 font-muted"><span
                                class="icon-email"></span>info&#64;comfortzonheating.com </div>
                    </div>
                    <div class="p-3 border-bottom">
                        <div class="d-flex gap-3 mb-2">
                            <span class="grey-badge"><span class="icon-time"></span> 10:00AM-11:00AM</span>
                            <button class="danger-badge" type="button" data-bs-toggle="offcanvas"
                                data-bs-target="#BookingDetailsSidebar"
                                aria-controls="BookingDetailsSidebar">Unassigned</button>
                        </div>
                        <h4 class="font18">John Deo</h4>
                        <p class="font14 mb-2 font-muted ">123 Main Street, Anytown, USA</p>
                        <div class="font14 d-flex align-items-center gap-2 mb-2 font-muted"> <span
                                class="icon-call"></span>(555)
                            555 555 </div>
                        <div class="font14 d-flex align-items-center gap-2 font-muted"><span
                                class="icon-email"></span>info&#64;comfortzonheating.com </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-9">
            <div class="d-flex align-items-center mb-4">
                <div class="d-flex align-items-center g-3">
                    <div class="form-group me-4">
                        <select id="employeesNumber" class="form-select pe-5">
                            <option value="" selected>All Team</option>
                            <option value="Michael Williams">Michael Williams</option>
                            <option value="John Smith">John Smith</option>
                            <option value="Sarah Johnso">Sarah Johnson</option>
                            <option value="James Davis">James Davis</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="employeesNumber" class="form-select pe-5">
                            <option value="" selected>Status</option>
                            <option value="Michael Williams">Michael Williams</option>
                            <option value="John Smith">John Smith</option>
                            <option value="Sarah Johnso">Sarah Johnson</option>
                            <option value="James Davis">James Davis</option>
                        </select>
                    </div>
                </div>
                <div class="ms-auto">
                    <h5 class="font500 font15">{{viewDate | date:'mediumDate'}}</h5>
                </div>
            </div>

            <app-calender-header [(view)]="view" [(viewDate)]="viewDate">
            </app-calender-header>

            <ng-template #customCellTemplate let-day="day" let-locale="locale">
                <div class="cal-cell-top">
                    <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{ day.badgeTotal }}</span>
                    <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
                </div>
                <!-- <small style="margin: 5px">There are {{ day.events.length }} events on this day</small> -->
            </ng-template>

            <div [ngSwitch]="view">
                <mwl-calendar-month-view *ngSwitchCase="'month'" [viewDate]="viewDate" [events]="events"
                    [refresh]="refresh" (dayClicked)="dayClicked($event.day)" [activeDayIsOpen]="activeDayIsOpen"
                    (eventClicked)="handleEvent('Clicked', $event.event)"
                    (eventTimesChanged)="eventTimesChanged($event)">
                </mwl-calendar-month-view>
                <mwl-calendar-week-view *ngSwitchCase="'week'" [viewDate]="viewDate" [events]="events"
                    [refresh]="refresh" (eventClicked)="handleEvent('Clicked', $event.event)"
                    (eventTimesChanged)="eventTimesChanged($event)">
                </mwl-calendar-week-view>
                <mwl-calendar-day-view *ngSwitchCase="'day'" [viewDate]="viewDate" [events]="events" [refresh]="refresh"
                    (eventClicked)="handleEvent('Clicked', $event.event)"
                    (eventTimesChanged)="eventTimesChanged($event)">
                </mwl-calendar-day-view>
            </div>

        </div>
        <br />
    </div>
</div>


<div class="offcanvas offcanvas-end sidebar-popup" tabindex="-1" id="BookingDetailsSidebar"
    aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header sidebar-popup-header">
        <div class="d-flex align-items-center">
            <h6 class="offcanvas-title" id="offcanvasRightLabel">Booking Details </h6>
            <span class="danger-badge ms-3">Unassigned</span>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">

        </button>
    </div>
    <div class="offcanvas-body">
        <form class="sidebar-popup-inner">
            <div class="p-3 rounded mb-4 border lightPrimaryCardBox">
                <div class="row">
                    <div class="col-8">
                        <div class="form-group">
                            <label for="datetime" class="form-label">Date and time</label>
                            <div class="bookingDateTimeWrapper">
                                <span class="icon-calendar"></span>
                                <input type="text" id="datetimepicker" name="datetimepicker" placeholder="Select Date"
                                    class="form-control" value="">
                                <button type="button" class="btn">
                                    <span class="icon-edit-2"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <label for="datetime" class="form-label">Booking ID</label>
                            <p class="mb-0 mt-1">23464323</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group mb-3">
                <h4 class="font18 mb-2">John Smith </h4>
                <div class="row">
                    <div class="col-4">
                        <div class="font15 d-flex align-items-center gap-2"> <span class="icon-call"></span>(555)
                            555 555 </div>
                    </div>
                    <div class="col-8">
                        <div class="font15 d-flex align-items-center gap-2"><span
                                class="icon-email"></span>info&#64;comfortzonheating.com </div>
                    </div>
                </div>
            </div>

            <div class="form-group mb-3">
                <label for="addressLabel" class="form-label">Services Address</label>
                <div class="font15 d-flex align-items-center gap-2"><span class="icon-address"></span>123 Main Street,
                    Anytown, USA </div>
            </div>
            <div class="form-group mb-3">
                <label for="addressLabel" class="form-label">Services</label>
                <div class="d-flex gap-2">
                    <span class="grey-outlined-button">Air conditioner repair-00001</span>
                    <span class="grey-outlined-button">Energy audit</span>
                </div>
            </div>
            <div class="form-group mb-3">
                <textarea placeholder="Description (Optional)" class="form-control" rows="7">I've scheduled an appointment for HVAC servicing. 
Our air conditioning unit has been making a strange rattling noise intermittently, especially during hot days. Also, our dog will be in the backyard, so please let us know when you're arriving. Looking forward to your visit. Thanks!
                </textarea>
            </div>
            <div class="form-group mb-3">
                <label for="status" class="form-label">Status</label>
                <select id="status" name="status" class="form-select">
                    <option value="" disabled selected>Select</option>
                    <option value="Pending">Pending</option>
                    <option value="Approved">Approved</option>
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="repeat" class="form-label">Repeat</label>
                <select id="repeat" name="repeat" class="form-select">
                    <option value="" disabled selected>Select</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="assignteam" class="form-label">Assigned Team</label>
                <div class="dropdown">
                    <button type="button" class="btn light-outlined-button dropdown-toggle w-100"
                        data-bs-toggle="dropdown" data-bs-display="static" aria-expanded="false">
                        Select
                        <span class="icon-down-arrow ms-auto"></span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end w-100">
                        <li class="dropdown-team-item">
                            <span class="success-badge rounded-pill dropdown-badge">Available</span>
                            <div class="d-flex tech-info  align-items-center gap-3">
                                <div class="tech-img">
                                    <img src="../../../../../assets/images/tech2.png" alt="" class="img-fluid" />
                                </div>
                                <div class="">
                                    <h5 class="font14 mb-1 font500"> Michael Johnson</h5>
                                    <p class="font13 mb-0 font-muted font400">Air Duct Cleaning and Maintenance</p>
                                </div>
                            </div>
                        </li>
                        <li class="dropdown-team-item">
                            <span class="warning-badge rounded-pill dropdown-badge">2 Running jobs</span>
                            <div class="d-flex tech-info  align-items-center gap-3">
                                <div class="tech-img">
                                    <img src="../../../../../assets/images/tech3.png" alt="" class="img-fluid" />
                                </div>
                                <div class="">
                                    <h5 class="font14 mb-1 font500"> Robert Davis</h5>
                                    <p class="font13 mb-0 font-muted font400">Mechanical Aptitude</p>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div class="selected-tech-team">
                        <div class="tech-img">
                            <img src="../../../../../assets/images/tech2.png" alt="" class="img-fluid" />
                        </div>
                        <div class="tech-img">
                            <img src="../../../../../assets/images/tech3.png" alt="" class="img-fluid" />
                        </div>
                    </div>
                </div>
                <!-- <select id="assignteam" name="assignteam" class="form-select">
                    <option value="" disabled selected>Select</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select> -->
            </div>
            <div class="form-group mb-3">
                <label for="cancelreason" class="form-label">Cancel Reason</label>
                <textarea placeholder="Enter Cancel Reasons" id="cancelreason" class="form-control" rows="7">
                </textarea>
            </div>
        </form>
    </div>
    <div class="sidebar-popup-bottom offcanvas-footer">
        <button class="light-outlined-button outlined w-100" data-bs-dismiss="offcanvas" type="button">Cancel</button>
        <button class="primary-filled-button filled w-100" data-bs-dismiss="offcanvas" type="submit">Save</button>
    </div>
</div>

<ng-template #modalContent let-close="close">
    <div class="modal-header">
        <h5 class="modal-title">Event action occurred</h5>
        <button type="button" class="close" (click)="close()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div>
            Action:
            <pre>{{ modalData.action }}</pre>
        </div>
        <div>
            Event:
            <pre>{{ modalData.event | json }}</pre>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="close()">
            OK
        </button>
    </div>
</ng-template>

